<html><head><title>toka.nbk: quotes.c</title>
</head>
<body>


<p><b>toka.nbk:</b> <a href="home.html">Home</a> | <a href="index.html">Index</a> | Next Page: <a href="recent_changes.html">Recent Changes</a> | Previous Page: <a href="quotes.html">Quotes</a></p>

<hr>

<h1>&nbsp;quotes.c</h1>


<h2>Use</h2>

<p>Build, operate on quotes.
</p>
<h2>Functions Provided</h2>

<pre>Variables:
  QUOTE quotes[8]
  Holds details about the compiler state, heap,
  etc for quotes during compilation.

  long qdepth
  Tracks how deeply the quotes are nested

  long quote_counter
  Tracks the current loop index

  Inst top
  Holds a pointer to the root quote

begin_quote()
Create a new quote. This allocates space for it,
and sets the compiler flag. A pointer to the
quote's start is pushed to the stack.

end_quote()
Terminate the previously opened quote and perform
data_class() semantics.

invoke()
Call a quote (passed on TOS)

iterate()
Repeat execution of a quote (passed on TOS), NOS
number of times.

alt_iterate()
Repeat execution of a quote (passed on TOS), NOS
number of times.

truefalse()
Takes three items (true-xt, false-xt, and a flag)
from the stack. Stack should be passed in as:
  flag true false 
It will execute true if the flag is true, false
otherwise.

recurse()
Compiles a call to the top-level quote. As a
trivial example:
  [ dup 1 &gt; [ dup 1 - recurse swap 2 - recurse + ] true? ] is fib

qlit()
Push the value in the following memory location
to the stack. This is used instead of lit() so
that the decompiler (and eventually debugger) can
reliably identify nested quotes as opposed to 
regular literals.

quote_index()
Return the current loop index (counter)

quote_while_true()
Return execution of a quote until the quote
returns FALSE.

quote_while_false()
Return execution of a quote until the quote
returns TRUE.
</pre>

<h2>Primitives Provided</h2>

<pre>[
]
recurse
i
whileTrue
whileFalse
invoke
iterate
+iterate
</pre>


<hr>

<p><b>toka.nbk:</b> <a href="home.html">Home</a> | <a href="index.html">Index</a> | Next Page: <a href="recent_changes.html">Recent Changes</a> | Previous Page: <a href="quotes.html">Quotes</a></p>

<hr>

<p><i>Notebook exported on Tuesday, 24 April 2007, 18:05:20 PM EDT</i></p>

</body></html>
